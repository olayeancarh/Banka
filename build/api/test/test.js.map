{"version":3,"sources":["../../../src/api/test/test.js"],"names":["chai","use","chaiHttp","should","describe","it","done","user","email","firstName","lastName","password","type","isAdmin","request","app","post","send","end","err","res","have","status","body","be","a","token","before","data","transaction","createdOn","accountNumber","cashier","amount","set","get","account","owner","balance","put"],"mappings":"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","sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\r\n// Import the dependencies for testing\r\nimport chai from 'chai';\r\nimport chaiHttp from 'chai-http';\r\n\r\nimport app from '../../index';\r\n\r\n// Configure chai\r\nchai.use(chaiHttp);\r\nchai.should();\r\n\r\ndescribe('Users', () => {\r\n  // Test to sign up user\r\n  it('should sign up user', (done) => {\r\n    const user = {\r\n      email: 'ahmed.musa@yahoo.com',\r\n      firstName: 'Ahmed',\r\n      lastName: 'Musa',\r\n      password: 'golden',\r\n      type: 'client',\r\n      isAdmin: 'false',\r\n    };\r\n    chai.request(app)\r\n      .post('/api/v1/users/auth/signup')\r\n      .send(user)\r\n      .end((err, res) => {\r\n        res.should.have.status(200);\r\n        res.body.should.be.a('object');\r\n        done();\r\n      });\r\n  });\r\n  // Test to sign up user\r\n  it('should sign in user', (done) => {\r\n    const user = {\r\n      email: 'ola1.wale@gmail.com',\r\n      password: 'golden',\r\n    };\r\n    chai.request(app)\r\n      .post('/api/v1/users/auth/signin')\r\n      .send(user)\r\n      .end((err, res) => {\r\n        res.should.have.status(200);\r\n        res.body.should.be.a('object');\r\n        done();\r\n      });\r\n  });\r\n});\r\n\r\ndescribe('Transactions', () => {\r\n  let token;\r\n\r\n  before((done) => {\r\n    chai.request(app)\r\n      .post('/api/v1/users/auth/signin')\r\n      .send({ email: 'ola1.wale@gmail.com', password: 'golden' })\r\n      .end((err, res) => {\r\n        ({ token } = res.body.data);\r\n        done();\r\n      });\r\n  });\r\n  // Test to credit a user account\r\n  it('should credit a user account', (done) => {\r\n    const transaction = {\r\n      createdOn: 'Mon Feb 18 2019 09:15:03',\r\n      accountNumber: '0019898982',\r\n      cashier: 2,\r\n      amount: 10000.00,\r\n    };\r\n    chai.request(app)\r\n      .post('/api/v1/transactions/0019898982/credit')\r\n      .set('Authorization', `Bearer ${token}`)\r\n      .send(transaction)\r\n      .end((err, res) => {\r\n        res.should.have.status(200);\r\n        res.body.should.be.a('object');\r\n        done();\r\n      });\r\n  });\r\n\r\n  // Test to debit a user account\r\n  it('should debit a user account', (done) => {\r\n    const transaction = {\r\n      createdOn: 'Mon Feb 18 2019 09:15:03',\r\n      accountNumber: '0019898982',\r\n      cashier: 2,\r\n      amount: 10000.00,\r\n    };\r\n    chai.request(app)\r\n      .post('/api/v1/transactions/0019898982/debit')\r\n      .set('Authorization', `Bearer ${token}`)\r\n      .send(transaction)\r\n      .end((err, res) => {\r\n        res.should.have.status(200);\r\n        res.body.should.be.a('object');\r\n        done();\r\n      });\r\n  });\r\n\r\n  // Test to fetch all transactions\r\n  it('should get all transaction', (done) => {\r\n    chai.request(app)\r\n      .get('/api/v1/transactions')\r\n      .set('Authorization', `Bearer ${token}`)\r\n      .end((err, res) => {\r\n        res.should.have.status(200);\r\n        res.body.should.be.a('object');\r\n        done();\r\n      });\r\n  });\r\n});\r\n\r\ndescribe('Accounts', () => {\r\n  let token;\r\n\r\n  before((done) => {\r\n    chai.request(app)\r\n      .post('/api/v1/users/auth/signin')\r\n      .send({ email: 'ola1.wale@gmail.com', password: 'golden' })\r\n      .end((err, res) => {\r\n        ({ token } = res.body.data);\r\n        done();\r\n      });\r\n  });\r\n  // Test to create an account\r\n  it('should create an account', (done) => {\r\n    const account = {\r\n      accountNumber: '0019898982',\r\n      createdOn: 'Mon Feb 18 2019 09:15:03',\r\n      owner: 1,\r\n      type: 'savings',\r\n      status: 'active',\r\n      balance: 46888.09,\r\n    };\r\n    chai.request(app)\r\n      .post('/api/v1/accounts')\r\n      .set('Authorization', `Bearer ${token}`)\r\n      .send(account)\r\n      .end((err, res) => {\r\n        res.should.have.status(200);\r\n        res.body.should.be.a('object');\r\n        done();\r\n      });\r\n  });\r\n\r\n  // Test to update account\r\n  it('should update account', (done) => {\r\n    const accountNumber = '0019898982';\r\n    const account = {\r\n      accountNumber: '0019898982',\r\n      createdOn: 'Mon Feb 18 2019 09:15:03',\r\n      owner: 1,\r\n      type: 'savings',\r\n      status: 'active',\r\n      balance: 46888.09,\r\n    };\r\n    chai.request(app)\r\n      .put(`/api/v1/accounts/${accountNumber}`)\r\n      .set('Authorization', `Bearer ${token}`)\r\n      .send(account)\r\n      .end((err, res) => {\r\n        res.should.have.status(200);\r\n        res.body.should.be.a('object');\r\n        // res.body.should.have.property('message');\r\n        done();\r\n      });\r\n  });\r\n\r\n  // Test to delete account\r\n  it('should delete account', (done) => {\r\n    const accountNumber = '0019898982';\r\n    chai.request(app)\r\n      .delete(`/api/v1/accounts/${accountNumber}`)\r\n      .set('Authorization', `Bearer ${token}`)\r\n      .end((err, res) => {\r\n        res.should.have.status(200);\r\n        res.body.should.be.a('object');\r\n        // res.body.should.have.property('message');\r\n        done();\r\n      });\r\n  });\r\n\r\n  // Test to fetch all accounts\r\n  it('should get all accounts', (done) => {\r\n    chai.request(app)\r\n      .get('/api/v1/accounts')\r\n      .set('Authorization', `Bearer ${token}`)\r\n      .end((err, res) => {\r\n        res.should.have.status(200);\r\n        res.body.should.be.a('object');\r\n        done();\r\n      });\r\n  });\r\n\r\n  // Test to fetch an account\r\n  it('should get an account', (done) => {\r\n    chai.request(app)\r\n      .get('/api/v1/accounts/0019898982')\r\n      .set('Authorization', `Bearer ${token}`)\r\n      .end((err, res) => {\r\n        res.should.have.status(200);\r\n        res.body.should.be.a('object');\r\n        done();\r\n      });\r\n  });\r\n});\r\n"],"file":"test.js"}